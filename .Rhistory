rm(oa.1, oa.2)
R01 <- rbind.fill(ya, oa)
rm(ya, oa)
}
### Health & Pol Pilot ###
{
### read in the health & pol subjects ###
health1 <- read.csv("raw_surveys/Health_Pol_Pilot_V1.csv")
#health1$ID <- paste(health1$StartDate, health1$EndDate, sep = ";")
idcol <- "ResponseId"
fIRQ <- "Q387_1"
lIRQ <- "Q387_16"
# ### this will check for participants that completed the val bias task ###
# health1$version <- ifelse(health1$Q204 %in% c("POSITIVE" , "NEGATIVE"), "A",
#                           ifelse(health1$Q305 %in% c("POSITIVE", "NEGATIVE"), "B",
#                                  ""))
# f <- "Q204"
# l <- "Q298"
# health1.a <- select(subset(health1, version == "A"), idcol, f:l)
# health1.a <- health1.a %>% filter_all(any_vars(. != ''))
# health1.a[health1.a==""] <- NA
# health1.a <- na.omit(health1.a)
#
# f <- "Q305"
# l <- "Q400"
# health1.b <- select(subset(health1, version == "B"), idcol, f:l)
# health1.b <- health1.b %>% filter_all(any_vars(. != ''))
# health1.b[health1.b==""] <- NA
# health1.b <- na.omit(health1.b)
#
# health1.keep <- rbind.fill(health1.a, health1.b)
#
# health1.keep <- health1.keep$MTurkCode
health1 <- select(health1, idcol, fIRQ:lIRQ)
names(health1) <- c("subjID", IRQ_names)
health1 <- health1[-c(1:2), ]
health1$Study <- 9
health2 <- read.csv("raw_surveys/Health_Pol_Pilot_V2.csv")
idcol <- "ResponseId"
fIRQ <- "Q387_1"
lIRQ <- "Q387_16"
fSTAIS <- "Q395_1"
lSTAIS <- "Q395_20"
health2 <- select(health2, idcol, fIRQ:lIRQ, fSTAIS:lSTAIS)
names(health2) <- c("subjID", IRQ_names, STAIS_names)
health2 <- health2[-c(1:2), ]
health2$Study <- 10
health3 <- read.csv("raw_surveys/Health_Pol_Pilot_V3.csv")
### note that the columns were named with duplicates in this file... ###
### you'll need to go into the excel file and rename these survey start and ###
### end columns by hand... ###
idcol <- "ResponseId"
fIRQ <- "IRQ_1"
lIRQ <- "IRQ_16"
fSTAIS <- "STAI_S1"
lSTAIS <- "STAI_S20"
fEQ <- "EQ_1"
lEQ <- "EQ_28"
fNEO <- "NEO_1"
lNEO <- "NEO_60"
health3 <- dplyr::select(health3, idcol, fIRQ:lIRQ, fSTAIS:lSTAIS, fEQ:lEQ, fNEO:lNEO)
names(health3) <- c("subjID", IRQ_names, STAIS_names, EQ_names, NEO_names)
health3 <- health3[-c(1:2), ]
health3$Study <- 11
### merge health data together ###
health <- rbind.fill(health1, health2, health3)
rm(health1, health2, health3)
### match health3 subj to data ###
IDmatch <- read.xlsx("raw_surveys/Health&Pol_FINAL.xlsx", sheet = 2)
IDmatch$Response.ID <- recode(IDmatch$Response.ID,
'R_1QFMkH2YL7VQd4C' = 'R_1QFNkH2YL7VQd4C',
'R_3Pcn8FM5jd3qEfO' = 'R_3Pcn8fN5jd3qEfO',
'R_1OTEFMeCmHE6acy' = 'R_1OTEFNeCmHE6acy',
'R_2E4SgU80FMiKDq3' = 'R_2E4SgU80FNiKDq3',
'R_3ktBbQEFM1Bh5b0' = 'R_3ktBbQEfN1Bh5b0',
'R_3JFMiXw342X38QT' = 'R_3JfniXw342X38QT',
'R_PNfx2OMN4o1F1FM' = 'R_PNfx2OMN4o1F1Fn',
'R_2WVFMzcoC6nalv5' = 'R_2WVfnzcoC6nalv5',
'R_29ttwFFMNMfvHqQ' = 'R_29ttwFFNNMfvHqQ',
'R_p64dYuh8kG3oFM7' = 'R_p64dYuh8kG3ofN7')
subjects <- IDmatch$Response.ID
health <- subset(health, subjID %in% subjects)
### add participant numbers ###
IDmatch <- IDmatch[, c(1, 12)]
names(IDmatch) <- c("ParticipantNumber", "subjID")
health <- merge(health, IDmatch, by = "subjID")
# IDmatch <- read.xlsx("raw_surveys/Health&Pol_FINAL.xlsx", sheet = 2)
# IDmatch <- IDmatch[,c(1, 4:5)]
# IDmatch$ID <- paste(IDmatch$Start.Date, IDmatch$End.Date, sep = ";")
# IDmatch <- IDmatch[, c(1, 4)]
# names(IDmatch) <- c("ParticipantNumber", "subjID")
# test <- merge(health, IDmatch, by = "subjID")
}
### Emo Reg Suppression ###
{
### read in Emo Reg Suppression subjects ###
supp1 <- read.xlsx("raw_surveys/EmoRegSupp_S1Surveys_text_11001-11026_21001-21028.xlsx", sheet = 1)
colnames(supp1) <- 1:ncol(supp1)
idcol <- "18"
fSTAIS <- "55"
lSTAIS <- "74"
supp1 <- select(supp1, idcol, fSTAIS:lSTAIS)
names(supp1) <- c("subjID", STAIS_names)
supp2 <- read.xlsx("raw_surveys/EmoRegSupp_S2Surveys_text_11001-11026_21001-21028.xlsx", sheet = 1)
colnames(supp2) <- 1:ncol(supp2)
idcol <- "18"
fSTAIS <- "19" ### also present in first session above.. which to use?
lSTAIS <- "38"
fEQ <- "51"
lEQ <- "78"
fNEO <- "109"
lNEO <- "168"
supp2 <- select(supp2, idcol, fSTAIS:lSTAIS, fEQ:lEQ, fNEO:lNEO)
names(supp2) <- c("subjID", STAIS_names, EQ_names, NEO_names)
supp <- merge(supp1, supp2, by = "subjID")
supp$Study <- 15
rm(supp1, supp2)
}
### Emo Reg Face ###
{
### read in EmoReg Face subjects ###
emoreg <- read.xlsx("raw_surveys/EmoRegFACE-Qualtrics.xlsx", sheet = 1)
idcol <- "ID1"
emoreg <- emoreg[, -c(61:80)]
fSTAIS <- "STAI-S_1" ## there are two STAI's ??? ###
lSTAIS <- "STAI-S_20"
fEQ <- "EQ_1"
lEQ <- "EQ_28"
fNEO <- "NEO_1"
lNEO <- "NEO_60"
emoreg <- dplyr::select(emoreg, idcol, fSTAIS:lSTAIS, fEQ:lEQ, fNEO:lNEO)
names(emoreg) <- c("subjID", STAIS_names, EQ_names, NEO_names)
emoreg$Study <- 5
}
### Old Exercise / MBSR ###
{
### read in the exercise and MBSR subjects ###
exer <- read.csv("raw_surveys/Exercise_S1_Inperson.csv")
### keep rows of interest (subjects' first session) ###
exer <- exer[1:7, ]
idcol <- "Q2"
fEQ <- "eq_1"
lEQ <- "eq_28"
fNEO <- "Q123_1"
lNEO <- "Q123_60"
fSTAIS <- "stai.s_1"
lSTAIS <- "stai.s_20"
fIRQ <- "irq_1"
lIRQ <- "irq_16"
exer <- dplyr::select(exer, idcol, fEQ:lEQ, fSTAIS:lSTAIS, fNEO:lNEO, fIRQ:lIRQ)
names(exer) <- c("subjID", EQ_names, STAIS_names, NEO_names, IRQ_names)
exer <- exer[-c(1:2),]
exer$Study <- c(18, 17, 17, 17, 17)
}
### delay ###
{
### read in Delay subjects ###
delay <- read.xlsx("raw_surveys/DelayQualtrics.xlsx", sheet = 1)
idcol <- "ID1"
fEQ <- "EQ28_1"
lEQ <- "EQ28_28"
fNEO <- "NEO_1"
lNEO <- "NEO_60"
fSTAIS <- "STAI-S_1"
lSTAIS <- "STAI-S_20"
delay <- dplyr::select(delay, idcol, fEQ:lEQ, fSTAIS:lSTAIS, fNEO:lNEO)
names(delay) <- c("subjID", EQ_names, STAIS_names, NEO_names)
delay$Study <- 1
delay <- delay[-1,]
}
### master dataframe ###
master <- rbind.fill(long, stroop, stress, psychphys, R01, timedeadline,
health, eldpri, supp, emoreg, exer, delay)
### now match up with val bias and RT from combined sheet ###
combined_bias <- read.xlsx("~/Documents/Nick-Grad/Neta_Lab/Combined_Dec5.xlsx", sheet = 2)
combined_bias <- combined_bias[, 1:27]
names(combined_bias)[3]<-"StudyNum"
combined_bias$MergeVar <- paste(combined_bias$StudyNum, combined_bias$Participant.ID, sep = ";")
master$MergeVar <- paste(master$Study, master$subjID, sep = ";")
final <- merge(master, combined_bias, by = "MergeVar")
count(combined_bias, StudyNum)
count(master, Study)
setdiff(combined_bias$MergeVar, master$MergeVar)
### Health & Pol Pilot ###
{
### read in the health & pol subjects ###
health1 <- read.csv("raw_surveys/Health_Pol_Pilot_V1.csv")
#health1$ID <- paste(health1$StartDate, health1$EndDate, sep = ";")
idcol <- "ResponseId"
fIRQ <- "Q387_1"
lIRQ <- "Q387_16"
# ### this will check for participants that completed the val bias task ###
# health1$version <- ifelse(health1$Q204 %in% c("POSITIVE" , "NEGATIVE"), "A",
#                           ifelse(health1$Q305 %in% c("POSITIVE", "NEGATIVE"), "B",
#                                  ""))
# f <- "Q204"
# l <- "Q298"
# health1.a <- select(subset(health1, version == "A"), idcol, f:l)
# health1.a <- health1.a %>% filter_all(any_vars(. != ''))
# health1.a[health1.a==""] <- NA
# health1.a <- na.omit(health1.a)
#
# f <- "Q305"
# l <- "Q400"
# health1.b <- select(subset(health1, version == "B"), idcol, f:l)
# health1.b <- health1.b %>% filter_all(any_vars(. != ''))
# health1.b[health1.b==""] <- NA
# health1.b <- na.omit(health1.b)
#
# health1.keep <- rbind.fill(health1.a, health1.b)
#
# health1.keep <- health1.keep$MTurkCode
health1 <- select(health1, idcol, fIRQ:lIRQ)
names(health1) <- c("ResponseID", IRQ_names)
health1 <- health1[-c(1:2), ]
health1$Study <- 9
health2 <- read.csv("raw_surveys/Health_Pol_Pilot_V2.csv")
idcol <- "ResponseId"
fIRQ <- "Q387_1"
lIRQ <- "Q387_16"
fSTAIS <- "Q395_1"
lSTAIS <- "Q395_20"
health2 <- select(health2, idcol, fIRQ:lIRQ, fSTAIS:lSTAIS)
names(health2) <- c("ResponseID", IRQ_names, STAIS_names)
health2 <- health2[-c(1:2), ]
health2$Study <- 10
health3 <- read.csv("raw_surveys/Health_Pol_Pilot_V3.csv")
### note that the columns were named with duplicates in this file... ###
### you'll need to go into the excel file and rename these survey start and ###
### end columns by hand... ###
idcol <- "ResponseId"
fIRQ <- "IRQ_1"
lIRQ <- "IRQ_16"
fSTAIS <- "STAI_S1"
lSTAIS <- "STAI_S20"
fEQ <- "EQ_1"
lEQ <- "EQ_28"
fNEO <- "NEO_1"
lNEO <- "NEO_60"
health3 <- dplyr::select(health3, idcol, fIRQ:lIRQ, fSTAIS:lSTAIS, fEQ:lEQ, fNEO:lNEO)
names(health3) <- c("ResponseID", IRQ_names, STAIS_names, EQ_names, NEO_names)
health3 <- health3[-c(1:2), ]
health3$Study <- 11
### merge health data together ###
health <- rbind.fill(health1, health2, health3)
rm(health1, health2, health3)
### match health3 subj to data ###
IDmatch <- read.xlsx("raw_surveys/Health&Pol_FINAL.xlsx", sheet = 2)
IDmatch$Response.ID <- recode(IDmatch$Response.ID,
'R_1QFMkH2YL7VQd4C' = 'R_1QFNkH2YL7VQd4C',
'R_3Pcn8FM5jd3qEfO' = 'R_3Pcn8fN5jd3qEfO',
'R_1OTEFMeCmHE6acy' = 'R_1OTEFNeCmHE6acy',
'R_2E4SgU80FMiKDq3' = 'R_2E4SgU80FNiKDq3',
'R_3ktBbQEFM1Bh5b0' = 'R_3ktBbQEfN1Bh5b0',
'R_3JFMiXw342X38QT' = 'R_3JfniXw342X38QT',
'R_PNfx2OMN4o1F1FM' = 'R_PNfx2OMN4o1F1Fn',
'R_2WVFMzcoC6nalv5' = 'R_2WVfnzcoC6nalv5',
'R_29ttwFFMNMfvHqQ' = 'R_29ttwFFNNMfvHqQ',
'R_p64dYuh8kG3oFM7' = 'R_p64dYuh8kG3ofN7')
subjects <- IDmatch$Response.ID
health <- subset(health, ResponseID %in% subjects)
### add participant numbers ###
IDmatch <- IDmatch[, c(1, 12)]
names(IDmatch) <- c("subjID", "ResponseID")
health <- merge(health, IDmatch, by = "ResponseID")
# IDmatch <- read.xlsx("raw_surveys/Health&Pol_FINAL.xlsx", sheet = 2)
# IDmatch <- IDmatch[,c(1, 4:5)]
# IDmatch$ID <- paste(IDmatch$Start.Date, IDmatch$End.Date, sep = ";")
# IDmatch <- IDmatch[, c(1, 4)]
# names(IDmatch) <- c("ParticipantNumber", "subjID")
# test <- merge(health, IDmatch, by = "subjID")
}
### master dataframe ###
master <- rbind.fill(long, stroop, stress, psychphys, R01, timedeadline,
health, eldpri, supp, emoreg, exer, delay)
### now match up with val bias and RT from combined sheet ###
combined_bias <- read.xlsx("~/Documents/Nick-Grad/Neta_Lab/Combined_Dec5.xlsx", sheet = 2)
combined_bias <- combined_bias[, 1:27]
names(combined_bias)[3]<-"StudyNum"
combined_bias$MergeVar <- paste(combined_bias$StudyNum, combined_bias$Participant.ID, sep = ";")
master$MergeVar <- paste(master$Study, master$subjID, sep = ";")
final <- merge(master, combined_bias, by = "MergeVar")
setdiff(combined_bias$MergeVar, master$MergeVar)
View(IDmatch)
### change to recode IDs ###
longIDs <- read.xlsx("raw_surveys/longitudinal_RECODED_IDS.xlsx")
View(longIDs)
longIDs <- longIDs[, c]
longIDs <- longIDs[, c(1,2)]
names(longIDs) <- c("Recode", "subjID")
test <- merge(long, longIDs, by = "subjID")
View(test)
long <- merge(long, longIDs, by = "subjID")
names(long) <- c("ID", EQ_names, IRQ_names, NE_only_names, STAIS_names, "subjID")
### master dataframe ###
master <- rbind.fill(long, stroop, stress, psychphys, R01, timedeadline,
health, eldpri, supp, emoreg, exer, delay)
### now match up with val bias and RT from combined sheet ###
combined_bias <- read.xlsx("~/Documents/Nick-Grad/Neta_Lab/Combined_Dec5.xlsx", sheet = 2)
combined_bias <- combined_bias[, 1:27]
names(combined_bias)[3]<-"StudyNum"
combined_bias$MergeVar <- paste(combined_bias$StudyNum, combined_bias$Participant.ID, sep = ";")
master$MergeVar <- paste(master$Study, master$subjID, sep = ";")
final <- merge(master, combined_bias, by = "MergeVar")
count(combined_bias, StudyNum)
count(master, Study)
setdiff(combined_bias$MergeVar, master$MergeVar)
View(long)
names(long) <- c("ID", EQ_names, IRQ_names, NE_only_names, STAIS_names, "study", "subjID")
### master dataframe ###
master <- rbind.fill(long, stroop, stress, psychphys, R01, timedeadline,
health, eldpri, supp, emoreg, exer, delay)
### now match up with val bias and RT from combined sheet ###
combined_bias <- read.xlsx("~/Documents/Nick-Grad/Neta_Lab/Combined_Dec5.xlsx", sheet = 2)
combined_bias <- combined_bias[, 1:27]
names(combined_bias)[3]<-"StudyNum"
combined_bias$MergeVar <- paste(combined_bias$StudyNum, combined_bias$Participant.ID, sep = ";")
master$MergeVar <- paste(master$Study, master$subjID, sep = ";")
final <- merge(master, combined_bias, by = "MergeVar")
count(combined_bias, StudyNum)
count(master, Study)
setdiff(combined_bias$MergeVar, master$MergeVar)
### longitudinal ###
{
### read in the Fall 2017 longitudinal subjects ###
long17 <- read.csv("raw_surveys/longitudinal_F17subs.csv")
idcol <- "Q1"
fEQ <- "Q.EQ_1"
lEQ <- "Q.EQ_28"
fIRQ <- "Q.IRQ_1"
lIRQ <- "Q.IRQ_16"
fSTAIS <- "Q.STAIS_1"
lSTAIS <- "Q.STAIS_20"
fNEO <- "Q.NEO_1"
lNEO <- "Q.NEO_24"
long17 <- dplyr::select(long17, idcol, fEQ:lEQ, fIRQ:lIRQ, fNEO:lNEO, fSTAIS:lSTAIS)
### clean up this mess ###
### row 59 is blank ###
long17 <- long17[-59,]
### incorrectly entered ID... fix ###
long17$Q1 <- as.character(long17$Q1)
long17[13,1] <-  "24"
long17[29,1] <-  "35"
long17 <- long17[-c(1:2),]
row.names(long17) <- NULL
### read in the written survey subs ###
long17.paper <- read.xlsx("raw_surveys/longitudinal_F17_papersurveys.xlsx", sheet = 1)
long17.paper <- dplyr::select(long17.paper, idcol, fEQ:lEQ, fIRQ:lIRQ, fNEO:lNEO, fSTAIS:lSTAIS)
long17.paper <- long17.paper[-c(1:2),]
row.names(long17.paper) <- NULL
### read in the Fall 2018 longitudinal subjects ###
long18 <- read.csv("raw_surveys/longitudinal_F18subs.csv")
long18 <- dplyr::select(long18, idcol, fEQ:lEQ, fIRQ:lIRQ, fNEO:lNEO, fSTAIS:lSTAIS)
long18 <- long18[-c(1:2),]
row.names(long18) <- NULL
### merge together ###
long17 <- rbind(long17.paper, long17)
long <- rbind(long17, long18)
names(long) <- c("subjID", EQ_names, IRQ_names, NE_only_names, STAIS_names)
long$Study <- 16
rm(long17, long17.paper, long18)
### change to recode IDs ###
longIDs <- read.xlsx("raw_surveys/longitudinal_RECODED_IDS.xlsx")
longIDs <- longIDs[, c(1,2)]
names(longIDs) <- c("Recode", "subjID")
long <- merge(long, longIDs, by = "subjID")
names(long) <- c("ID", EQ_names, IRQ_names, NE_only_names, STAIS_names, "study", "subjID")
}
### master dataframe ###
master <- rbind.fill(long, stroop, stress, psychphys, R01, timedeadline,
health, eldpri, supp, emoreg, exer, delay)
master$MergeVar <- paste(master$Study, master$subjID, sep = ";")
final <- merge(master, combined_bias, by = "MergeVar")
setdiff(combined_bias$MergeVar, master$MergeVar)
View(long)
master$MergeVar <- paste(master$Study, master$subjID, sep = ";")
final <- merge(master, combined_bias, by = "MergeVar")
setdiff(combined_bias$MergeVar, master$MergeVar)
### master dataframe ###
master <- rbind.fill(long, stroop, stress, psychphys, R01, timedeadline,
health, eldpri, supp, emoreg, exer, delay)
### now match up with val bias and RT from combined sheet ###
combined_bias <- read.xlsx("~/Documents/Nick-Grad/Neta_Lab/Combined_Dec5.xlsx", sheet = 2)
combined_bias <- combined_bias[, 1:27]
names(combined_bias)[3]<-"StudyNum"
combined_bias$MergeVar <- paste(combined_bias$StudyNum, combined_bias$Participant.ID, sep = ";")
master$MergeVar <- paste(master$Study, master$subjID, sep = ";")
final <- merge(master, combined_bias, by = "MergeVar")
count(combined_bias, StudyNum)
count(master, Study)
setdiff(combined_bias$MergeVar, master$MergeVar)
### longitudinal ###
{
### read in the Fall 2017 longitudinal subjects ###
long17 <- read.csv("raw_surveys/longitudinal_F17subs.csv")
idcol <- "Q1"
fEQ <- "Q.EQ_1"
lEQ <- "Q.EQ_28"
fIRQ <- "Q.IRQ_1"
lIRQ <- "Q.IRQ_16"
fSTAIS <- "Q.STAIS_1"
lSTAIS <- "Q.STAIS_20"
fNEO <- "Q.NEO_1"
lNEO <- "Q.NEO_24"
long17 <- dplyr::select(long17, idcol, fEQ:lEQ, fIRQ:lIRQ, fNEO:lNEO, fSTAIS:lSTAIS)
### clean up this mess ###
### row 59 is blank ###
long17 <- long17[-59,]
### incorrectly entered ID... fix ###
long17$Q1 <- as.character(long17$Q1)
long17[13,1] <-  "24"
long17[29,1] <-  "35"
long17 <- long17[-c(1:2),]
row.names(long17) <- NULL
### read in the written survey subs ###
long17.paper <- read.xlsx("raw_surveys/longitudinal_F17_papersurveys.xlsx", sheet = 1)
long17.paper <- dplyr::select(long17.paper, idcol, fEQ:lEQ, fIRQ:lIRQ, fNEO:lNEO, fSTAIS:lSTAIS)
long17.paper <- long17.paper[-c(1:2),]
row.names(long17.paper) <- NULL
### read in the Fall 2018 longitudinal subjects ###
long18 <- read.csv("raw_surveys/longitudinal_F18subs.csv")
long18 <- dplyr::select(long18, idcol, fEQ:lEQ, fIRQ:lIRQ, fNEO:lNEO, fSTAIS:lSTAIS)
long18 <- long18[-c(1:2),]
row.names(long18) <- NULL
### merge together ###
long17 <- rbind(long17.paper, long17)
long <- rbind(long17, long18)
names(long) <- c("subjID", EQ_names, IRQ_names, NE_only_names, STAIS_names)
long$Study <- 16
rm(long17, long17.paper, long18)
### change to recode IDs ###
longIDs <- read.xlsx("raw_surveys/longitudinal_RECODED_IDS.xlsx")
longIDs <- longIDs[, c(1,2)]
names(longIDs) <- c("Recode", "subjID")
long <- merge(long, longIDs, by = "subjID")
names(long) <- c("ID", EQ_names, IRQ_names, NE_only_names, STAIS_names, "study", "subjID")
}
### master dataframe ###
master <- rbind.fill(long, stroop, stress, psychphys, R01, timedeadline,
health, eldpri, supp, emoreg, exer, delay)
### now match up with val bias and RT from combined sheet ###
combined_bias <- read.xlsx("~/Documents/Nick-Grad/Neta_Lab/Combined_Dec5.xlsx", sheet = 2)
combined_bias <- combined_bias[, 1:27]
names(combined_bias)[3]<-"StudyNum"
combined_bias$MergeVar <- paste(combined_bias$StudyNum, combined_bias$Participant.ID, sep = ";")
master$MergeVar <- paste(master$Study, master$subjID, sep = ";")
final <- merge(master, combined_bias, by = "MergeVar")
count(combined_bias, StudyNum)
count(master, Study)
setdiff(combined_bias$MergeVar, master$MergeVar)
View(master)
### read in the Fall 2017 longitudinal subjects ###
long17 <- read.csv("raw_surveys/longitudinal_F17subs.csv")
idcol <- "Q1"
fEQ <- "Q.EQ_1"
lEQ <- "Q.EQ_28"
fIRQ <- "Q.IRQ_1"
lIRQ <- "Q.IRQ_16"
fSTAIS <- "Q.STAIS_1"
lSTAIS <- "Q.STAIS_20"
fNEO <- "Q.NEO_1"
lNEO <- "Q.NEO_24"
long17 <- dplyr::select(long17, idcol, fEQ:lEQ, fIRQ:lIRQ, fNEO:lNEO, fSTAIS:lSTAIS)
### clean up this mess ###
### row 59 is blank ###
long17 <- long17[-59,]
### incorrectly entered ID... fix ###
long17$Q1 <- as.character(long17$Q1)
long17[13,1] <-  "24"
long17[29,1] <-  "35"
long17 <- long17[-c(1:2),]
row.names(long17) <- NULL
### read in the written survey subs ###
long17.paper <- read.xlsx("raw_surveys/longitudinal_F17_papersurveys.xlsx", sheet = 1)
long17.paper <- dplyr::select(long17.paper, idcol, fEQ:lEQ, fIRQ:lIRQ, fNEO:lNEO, fSTAIS:lSTAIS)
long17.paper <- long17.paper[-c(1:2),]
row.names(long17.paper) <- NULL
### read in the Fall 2018 longitudinal subjects ###
long18 <- read.csv("raw_surveys/longitudinal_F18subs.csv")
long18 <- dplyr::select(long18, idcol, fEQ:lEQ, fIRQ:lIRQ, fNEO:lNEO, fSTAIS:lSTAIS)
long18 <- long18[-c(1:2),]
row.names(long18) <- NULL
### merge together ###
long17 <- rbind(long17.paper, long17)
long <- rbind(long17, long18)
names(long) <- c("subjID", EQ_names, IRQ_names, NE_only_names, STAIS_names)
long$Study <- 16
rm(long17, long17.paper, long18)
### change to recode IDs ###
longIDs <- read.xlsx("raw_surveys/longitudinal_RECODED_IDS.xlsx")
longIDs <- longIDs[, c(1,2)]
names(longIDs) <- c("Recode", "subjID")
long <- merge(long, longIDs, by = "subjID")
names(long) <- c("ID", EQ_names, IRQ_names, NE_only_names, STAIS_names, "study", "subjID")
View(long)
### master dataframe ###
master <- rbind.fill( stroop, stress, psychphys, R01, timedeadline,
health, eldpri, supp, emoreg, exer, delay)
View(master)
View(master)
### master dataframe ###
master <- rbind.fill(long, stroop, stress, psychphys, R01, timedeadline,
health, eldpri, supp, emoreg, exer, delay)
View(master)
names(long) <- c("ID", EQ_names, IRQ_names, NE_only_names, STAIS_names, "Study", "subjID")
### master dataframe ###
master <- rbind.fill(long, stroop, stress, psychphys, R01, timedeadline,
health, eldpri, supp, emoreg, exer, delay)
master$MergeVar <- paste(master$Study, master$subjID, sep = ";")
final <- merge(master, combined_bias, by = "MergeVar")
setdiff(combined_bias$MergeVar, master$MergeVar)
View(master)
